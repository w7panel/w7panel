---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: (devel)
    api-approved.kubernetes.io: "https://www.w7.cc"
  name: appgroups.appgroup.w7.cc
spec:
  group: appgroup.w7.cc
  names:
    kind: AppGroup
    listKind: AppGroupList
    plural: appgroups
    singular: appgroup
  scope: Namespaced
  versions:
    - name: v1alpha1
      schema:
        openAPIV3Schema:
          properties:
            apiVersion:
              description: |-
                APIVersion defines the versioned schema of this representation of an object.
                Servers should convert recognized schemas to the latest internal value, and
                may reject unrecognized values.
                More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources
              type: string
            kind:
              description: |-
                Kind is a string value representing the REST resource this object represents.
                Servers may infer this from the endpoint the client submits requests to.
                Cannot be updated.
                In CamelCase.
                More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds
              type: string
            metadata:
              type: object
            spec:
              properties:
                description:
                  type: string
                helmConfig:
                  properties:
                    chartName:
                      type: string
                    repository:
                      type: string
                    version:
                      type: string
                  required:
                    - chartName
                    - repository
                    - version
                  type: object
                identifie:
                  type: string
                isHelm:
                  description: Annotations   map[string]string `json:"annotations"`   //annotations
                  type: boolean
                logo:
                  type: string
                suffix:
                  type: string
                title:
                  type: string
                type:
                  type: string
                upgradingVersion:
                  type: string
                version:
                  type: string
                zpkUrl:
                  description: |-
                    Domains       []string   `json:"domains"`       //域名列表
                    DefaultDomain string     `json:"defaultDomain"` //默认域名
                  type: string
              required:
                - description
                - helmConfig
                - identifie
                - isHelm
                - logo
                - suffix
                - title
                - type
                - upgradingVersion
                - version
                - zpkUrl
              type: object
            status:
              properties:
                deployInfo:
                  items:
                    properties:
                      deployStatus:
                        type: string
                      identifie:
                        type: string
                      resourcesList:
                        items:
                          properties:
                            apiVersion:
                              type: string
                            deployStatus:
                              type: string
                            deployTitle:
                              type: string
                            kind:
                              type: string
                            name:
                              type: string
                            namespace:
                              type: string
                          required:
                            - apiVersion
                            - deployStatus
                            - deployTitle
                            - kind
                            - name
                            - namespace
                          type: object
                        type: array
                      title:
                        type: string
                    required:
                      - deployStatus
                      - identifie
                      - resourcesList
                      - title
                    type: object
                  type: array
                deployStatus:
                  type: string
                isZeroReplicas:
                  type: boolean
                items:
                  items:
                    description: ApplicationItemStatus 用于记录单个应用的部署状态信息
                    properties:
                      apiVersion:
                        type: string
                      creationTimestamp:
                        format: date-time
                        type: string
                      deployStatus:
                        type: string
                      isHelmWorkLoad:
                        type: boolean
                      isZeroReplicas:
                        type: boolean
                      kind:
                        type: string
                      name:
                        type: string
                      ready:
                        type: boolean
                      title:
                        type: string
                    required:
                      - apiVersion
                      - deployStatus
                      - isHelmWorkLoad
                      - isZeroReplicas
                      - kind
                      - name
                      - ready
                      - title
                    type: object
                  type: array
                ready:
                  type: boolean
              required:
                - deployInfo
                - deployStatus
                - isZeroReplicas
                - items
                - ready
              type: object
          required:
            - spec
            - status
          type: object
      served: true
      storage: true
