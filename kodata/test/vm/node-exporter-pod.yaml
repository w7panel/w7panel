apiVersion: operator.victoriametrics.com/v1beta1
kind: VMPodScrape
metadata:
    labels:
       app: node-exporter
    name: node-exporter
    namespace: vm-operator
spec:
    podMetricsEndpoints:
        -
            # bearerTokenFile: /var/run/secrets/kubernetes.io/serviceaccount/token
            port: metrics
            scheme: http
            # tlsConfig:
            #     caFile: /var/run/secrets/kubernetes.io/serviceaccount/ca.crt
            #     serverName: kubernetes
    jobLabel: node-exporter
    namespaceSelector:
        matchNames:
            - default
    selector:
        matchLabels:
            app.kubernetes.io/component: metrics
            app.kubernetes.io/instance: node-exporter
            app.kubernetes.io/managed-by: Helm
            app.kubernetes.io/name: prometheus-node-exporter
